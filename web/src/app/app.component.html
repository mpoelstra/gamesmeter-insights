<div class="page">
  <header class="hero">
    <div>
      <p class="eyebrow">{{ i18n.t('hero.eyebrow') }}</p>
      <h1>{{ i18n.t('hero.title') }}</h1>
      <p class="subtitle">
        {{ i18n.t('hero.subtitle') }}
      </p>
    </div>
    <div class="hero-panel">
      <div class="lang-switch">
        <button type="button" [class.active]="i18n.lang() === 'en'" (click)="i18n.setLang('en')">
          {{ i18n.t('lang.en') }}
        </button>
        <button type="button" [class.active]="i18n.lang() === 'nl'" (click)="i18n.setLang('nl')">
          {{ i18n.t('lang.nl') }}
        </button>
      </div>
      <div class="upload">
        <label class="upload-button" [class.has-file]="fileName() !== null">
          <input type="file" accept=".csv" (change)="onFileSelected($event)" />
          <span>{{ fileName() ?? i18n.t('upload.button') }}</span>
        </label>
        <button class="ghost" type="button" (click)="loadSample()">{{ i18n.t('upload.sample') }}</button>
        @if (status() === 'ready') {
          <button class="ghost" type="button" (click)="clearCache()">{{ i18n.t('upload.clear') }}</button>
        }
      </div>
      <div class="status" [class.error]="status() === 'error'">
        {{ statusMessage() }}
      </div>
      @if (stats().total > 0) {
        <div class="meta">
          <span>{{ i18n.t('meta.titles', { count: stats().total }) }}</span>
          <span>{{ i18n.t('meta.rated', { count: stats().ratedCount }) }}</span>
          <span>{{ i18n.t('meta.average', { value: stats().average.toFixed(2) }) }}</span>
        </div>
      }
    </div>
  </header>

  @if (stats().total > 0) {
    <section class="tabs">
      <a routerLink="/overview" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        {{ i18n.t('tabs.overview') }}
      </a>
      <a routerLink="/timeline" routerLinkActive="active">{{ i18n.t('tabs.timeline') }}</a>
      <a routerLink="/platforms" routerLinkActive="active">{{ i18n.t('tabs.platforms') }}</a>
      <a routerLink="/games" routerLinkActive="active">{{ i18n.t('tabs.games') }}</a>
      <a routerLink="/fun" routerLinkActive="active">{{ i18n.t('tabs.fun') }}</a>
      <a routerLink="/gems" routerLinkActive="active">{{ i18n.t('tabs.gems') }}</a>
      <a routerLink="/snake" routerLinkActive="active">{{ i18n.t('tabs.snake') }}</a>
      <a routerLink="/library" routerLinkActive="active">{{ i18n.t('tabs.library') }}</a>
    </section>
  }

  @if (stats().total === 0) {
    <section class="empty">
      <h2>{{ i18n.t('empty.title') }}</h2>
      <p>{{ i18n.t('empty.body') }}</p>
    </section>
  } @else {
    <div class="content">
      <router-outlet />
    </div>
  }
</div>
