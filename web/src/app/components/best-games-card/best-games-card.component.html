<article class="card">
  <div class="header">
    <h3>Best Scoring Games Per Year</h3>
    <label class="filter">
      Year
      <select [value]="yearFilter()" (change)="updateYear($any($event.target).value)">
        @for (year of yearOptions; track year) {
          <option [value]="year">{{ year === 'all' ? 'All years' : year }}</option>
        }
      </select>
    </label>
  </div>
  <div class="games">
    @for (summary of filteredSummaries(); track summary.year) {
      <div class="game-year">
        <div class="game-year-header">
          <span>{{ summary.year }}</span>
          <span class="muted">Top {{ summary.topGames.length }} titles</span>
        </div>
        <div class="game-list">
          @for (game of summary.topGames; track game.title) {
            <div class="game-item">
              <div>
                <p class="game-title">{{ game.title }}</p>
                <p class="muted">{{ game.platform ?? 'Platform unknown' }}</p>
              </div>
              <span class="rating">{{ game.rating?.toFixed(1) }}</span>
            </div>
          }
        </div>
      </div>
    }
  </div>
</article>
