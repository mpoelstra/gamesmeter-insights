<article class="card">
  <div class="header">
    <h3>{{ i18n.t('bestGames.title') }}</h3>
    <label class="filter">
      {{ i18n.t('filters.year') }}
      <select [value]="yearFilter()" (change)="updateYear($any($event.target).value)">
        @for (year of yearOptions; track year) {
          <option [value]="year">{{ year === 'all' ? i18n.t('filters.allYears') : year }}</option>
        }
      </select>
    </label>
  </div>
  <div class="games">
    @for (summary of filteredSummaries(); track summary.year) {
      <div class="game-year">
        <div class="game-year-header">
          <span>{{ summary.year }}</span>
          <span class="muted">{{ i18n.t('bestGames.topTitles', { count: summary.topGames.length }) }}</span>
        </div>
            <div class="game-list">
            @for (game of summary.topGames; track game.title; let i = $index) {
              <div class="game-item">
                <div class="game-info">
                  @if (rankLabel(i)) {
                    <span class="rank" [attr.data-rank]="i + 1">{{ rankLabel(i) }}</span>
                  }
                  <div class="game-text">
                    <p class="game-title">{{ game.title }}</p>
                    <p class="muted">{{ game.platform ?? i18n.t('label.platformUnknown') }}</p>
                  </div>
                </div>
                <span class="rating">{{ game.rating?.toFixed(1) }}</span>
              </div>
            }
            </div>
      </div>
    }
  </div>
</article>
