<article class="card">
  <div class="header">
    <h3>{{ i18n.t('bestGames.title') }}</h3>
    <label class="filter">
      {{ i18n.t('filters.year') }}
      <select [value]="yearFilter()" (change)="updateYear($any($event.target).value)">
        @for (year of yearOptions; track year) {
          <option [value]="year">{{ year === 'all' ? i18n.t('filters.allYears') : year }}</option>
        }
      </select>
    </label>
  </div>
  <div class="games">
    @for (summary of filteredSummaries(); track summary.year) {
      <app-best-games-year
        [year]="summary.year"
        [meta]="i18n.t('bestGames.topTitles', { count: summary.topGames.length })"
      >
        @for (game of summary.topGames; track game.title; let i = $index) {
          <app-best-game-item
            [title]="game.title"
            [platform]="game.platform ?? i18n.t('label.platformUnknown')"
            [rating]="game.rating"
            [rank]="i + 1"
            [ratingLabel]="game.rating?.toFixed(1) ?? i18n.t('label.na')"
          />
        }
      </app-best-games-year>
    }
  </div>
</article>
