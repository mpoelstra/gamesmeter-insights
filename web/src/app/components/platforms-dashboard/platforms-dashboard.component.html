<article class="platforms">
  <div class="card signatures">
    <div class="head">
      <h3>Platform Signatures</h3>
      <p class="muted">Your platform personality in three highlights.</p>
    </div>
    @if (signature()) {
      <div class="signature-grid">
        <div class="sig">
          <p class="label">Most played</p>
          <p class="value">{{ signature()!.mostPlayed.name }}</p>
          <p class="muted">{{ signature()!.mostPlayed.count }} games</p>
        </div>
        <div class="sig">
          <p class="label">Highest avg</p>
          <p class="value">{{ signature()!.highestAvg.name }}</p>
          <p class="muted">Avg {{ signature()!.highestAvg.average.toFixed(2) }}</p>
        </div>
        <div class="sig">
          <p class="label">Most consistent</p>
          <p class="value">{{ signature()!.consistent?.name ?? 'N/A' }}</p>
          <p class="muted">Std dev {{ signature()!.consistent?.stdDev.toFixed(2) ?? '—' }}</p>
        </div>
      </div>
    }
  </div>

  <div class="card">
    <div class="head">
      <h3>Era Peaks</h3>
      <p class="muted">Most played platform per decade.</p>
    </div>
    <div class="era-grid">
      @for (era of eraPeaks(); track era.era) {
        <div class="era">
          <p class="label">{{ era.era }}</p>
          <p class="value">{{ era.platform }}</p>
          <p class="muted">Avg {{ era.average.toFixed(2) }} · {{ era.count }} games</p>
        </div>
      }
    </div>
  </div>

  <div class="card">
    <div class="head">
      <h3>Era Lows</h3>
      <p class="muted">Least played platform per decade.</p>
    </div>
    <div class="era-grid">
      @for (era of eraLows(); track era.era) {
        <div class="era low">
          <p class="label">{{ era.era }}</p>
          <p class="value">{{ era.platform }}</p>
          <p class="muted">Avg {{ era.average.toFixed(2) }} · {{ era.count }} games</p>
        </div>
      }
    </div>
  </div>

  <div class="card">
    <div class="head">
      <h3>Platform Timeline Ribbons</h3>
      <p class="muted">Average rating per platform over time.</p>
    </div>
    <div class="chart">
      <canvas baseChart [type]="chartTypeLine" [data]="ribbonData" [options]="ribbonOptions"></canvas>
    </div>
  </div>

  <div class="card">
    <div class="head">
      <h3>Era Bands</h3>
      <p class="muted">Platform volume over time (stacked).</p>
    </div>
    <div class="chart">
      <canvas baseChart [type]="chartTypeLine" [data]="eraBandsData" [options]="eraBandsOptions"></canvas>
    </div>
    <p class="note">Note: eras are based on each game’s original release year, not when you rated it.</p>
  </div>

  <div class="card">
    <div class="head">
      <h3>Platform Drift</h3>
      <p class="muted">Bubble size = games, height = average rating.</p>
    </div>
    <div class="chart">
      <canvas baseChart [type]="chartTypeBubble" [data]="bubbleData" [options]="bubbleOptions"></canvas>
    </div>
  </div>
</article>
